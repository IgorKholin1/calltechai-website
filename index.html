<script src="https://sdk.twilio.com/js/client/v1.13/twilio.min.js"></script>

<button onclick="callBot()" style="margin-top: 20px;">ðŸ“ž CALL FOR TEST</button>

<script>
  let device;

  async function callBot() {
    const response = await fetch('https://calltechai.onrender.com/token');
    const data = await response.json();

    device = new Twilio.Device(data.token, {
      codecPreferences: ['opus', 'pcmu'],
      fakeLocalDTMF: true,
      enableRingingState: true,
    });

    device.on('ready', () => {
      device.connect({ To: 'bot' });
    });

    device.on('error', error => {
      console.error('Twilio Error:', error);
    });
  }
</script>
